/* --- å…¨å±€é‡ç½® --- */
:root {
    --bg-main: #0f172a;
    --bg-sidebar: #1e293b;
    --accent-blue: #38bdf8;
    --border-color: #334155;
    --card-bg: #0f172a;
}

html, body { height: 100%; margin: 0; padding: 0; overflow: hidden; background-color: var(--bg-main); color: #f1f5f9; font-family: 'Inter', system-ui, sans-serif; }

.navbar { height: 60px; background: rgba(15, 23, 42, 0.9) !important; backdrop-filter: blur(10px); border-bottom: 1px solid var(--border-color) !important; z-index: 2100; }

.main-wrapper { display: flex; height: calc(100vh - 60px); width: 100vw; position: relative; }

/* ä¾§è¾¹æ å¸ƒå±€ */
#sidebar {
    width: 420px; min-width: 420px; height: 100%;
    background-color: var(--bg-sidebar); border-right: 1px solid var(--border-color);
    display: flex; flex-direction: column; z-index: 2000;
    transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

#sidebar-overlay { display: none; position: fixed; inset: 0; top: 60px; background: rgba(0,0,0,0.6); z-index: 1999; backdrop-filter: blur(4px); }
#sidebar.show + #sidebar-overlay { display: block; }

.sidebar-content { flex-grow: 1; overflow-y: auto; padding: 1.5rem !important; }
.sidebar-footer { padding: 1.2rem; background: var(--bg-sidebar); border-top: 1px solid var(--border-color); }

/* --- å®¹å™¨å°ºå¯¸å¯¹é½ä¸æç¤º (ä¿®å¤æ–‡å­—æ¶ˆå¤±) --- */
.bin-size-row { display: flex; gap: 10px; align-items: flex-end; padding: 5px 0; }
.bin-size-item { flex: 1; min-width: 0; position: relative; }
.input-label-hint {
    position: relative;
    margin-top: 20px !important; /* ğŸ‘ˆ å¿…é¡»åŠ è¿™ä¸ªï¼Œå¦åˆ™æ ‡ç­¾ä¼šè¢«æŒ¡åœ¨è¾“å…¥æ¡†ä¸‹é¢ */
}

.input-label-hint::after {
    content: attr(data-hint);
    position: absolute;
    top: -20px;       /* ğŸ‘ˆ å‘ä¸Šåç§»é‡ */
    left: 2px;        /* ğŸ‘ˆ é å·¦å¯¹é½ */
    font-size: 11px;
    color: #94a3b8;
    white-space: nowrap; /* é˜²æ­¢æ¢è¡Œ */
}

/* --- è´§ç‰©å¡ç‰‡ (ä¿®å¤ Padding) --- */
.item-card {
    background: var(--card-bg); border: 1px solid var(--border-color);
    border-radius: 12px; padding: 20px; margin-bottom: 15px; /* å¢åŠ å†…è¾¹è· */
    transition: all 0.2s;
    padding: 24px 16px 16px 16px !important; /* ğŸ‘ˆ é¡¶éƒ¨ padding å¿…é¡»å¤§ï¼Œç»™æ ‡ç­¾ç•™ä½ */
    margin-bottom: 20px !important;
}

/* ====== å…ˆå¡«å……é”å®šæ€ï¼šæ›´å¼ºçš„â€œä¸å¯äº¤äº’/ä¸å¯èšç„¦â€è§†è§‰åé¦ˆ ====== */
.field-wrap {
  position: relative;
}

.field-wrap.locked input,
.field-wrap.locked select,
.field-wrap.locked button {
  opacity: 0.55;
  cursor: not-allowed !important;
}

.field-wrap.locked .dropdown-toggle,
.field-wrap.locked .dropdown-menu {
  pointer-events: none;
}

.field-wrap.locked input,
.field-wrap.locked select {
  filter: grayscale(0.25);
}

.field-lock-icon {
  position: absolute;
  top: 4px;
  right: 6px;
  font-size: 12px;
  opacity: 0.8;
  pointer-events: none;
}
.item-card:hover { border-color: var(--accent-blue); box-shadow: 0 0 10px rgba(56, 189, 248, 0.1); }

/* --- ä¸‹æ‹‰æ¡†ä¸æŒ‰é’®ç¾åŒ– --- */
.form-control, .form-select {
    background-color: #1e293b !important; border: 1px solid var(--border-color) !important;
    color: #f1f5f9 !important; border-radius: 8px; padding: 6px 10px;
}

/* å½»åº•ä¿®å¤é¢œè‰²é€‰æ‹©å™¨ä¸è§çš„é—®é¢˜ */
.color-block-select {
    color: transparent !important;
    text-shadow: none !important;
    background-clip: padding-box; /* ç¡®ä¿èƒŒæ™¯è‰²å¡«æ»¡ */
    border: 1px solid var(--border-color) !important;
}

/* é‡ç‚¹ï¼šç¡®ä¿ JS ä¿®æ”¹ style.backgroundColor æ—¶èƒ½åˆºç©¿æ‰€æœ‰é™åˆ¶ */
select.it-color {
    -webkit-appearance: none !important;
    -moz-appearance: none !important;
    appearance: none !important;
    background-image: none !important; /* å½»åº•ç¦ç”¨é»˜è®¤çš„å°ç®­å¤´ */
    color: transparent !important;
    text-shadow: none !important;
    cursor: pointer;
    border: 1px solid var(--border-color) !important;
    /* å¢åŠ ä¸€ä¸ªé»˜è®¤èƒŒæ™¯å›¾é…ç½®ï¼Œé˜²æ­¢ JS è¿˜æ²¡åŠ è½½æ—¶æ˜¯ç™½çš„ */
    background-color: #3b82f6;
}
/* --- å½»åº•æ ¹é™¤ä¸‹æ‹‰ç®­å¤´ --- */
/* ä¹‹å‰ä¸¢æ‰çš„å†…è¾¹è·è¡¥å›æ¥ */
select.form-select,
select.it-color,
select#bin-unit {
    -webkit-appearance: none !important;
    -moz-appearance: none !important;
    appearance: none !important;
    background-image: none !important; /* ğŸ‘ˆ å…³é”®ï¼šå¼ºåˆ¶æ€æ‰ Bootstrap é»˜è®¤çš„ç®­å¤´ SVG */
    padding-right: 0.75rem !important;  /* ä¿®æ­£å› ä¸ºç®­å¤´æ¶ˆå¤±ç•™ä¸‹çš„å¤šä½™å³è¾¹è· */
}

/* é’ˆå¯¹ IE çš„ç‰¹æ®Šå¤„ç†ï¼ˆè™½ç„¶ç°åœ¨å¾ˆå°‘ç”¨äº†ï¼Œä½†ä¸ºäº†ä¿é™©ï¼‰ */
select::-ms-expand {
    display: none !important;
}
/* ä¸‹æ‹‰å‡ºæ¥çš„é€‰é¡¹ä¸€å®šè¦æœ‰å­— */
.color-block-select option {
    background-color: #1e293b !important;
    color: white !important;
    text-shadow: none !important;
    padding: 10px;
}

/* ç»Ÿè®¡ä¸æœªè£…å…¥æ¸…å• */
#result-panel { background: linear-gradient(145deg, #1e293b, #0f172a); border: 1px solid rgba(56, 189, 248, 0.3); border-radius: 12px; }
.unpacked-item {
    background: rgba(239, 68, 68, 0.1); border: 1px solid rgba(239, 68, 68, 0.2);
    border-radius: 8px; padding: 10px 15px; margin-bottom: 8px; color: #fca5a5;
}

/* ç»†æ»šåŠ¨æ¡ */
.custom-scrollbar::-webkit-scrollbar { width: 5px; }
.custom-scrollbar::-webkit-scrollbar-thumb { background: #334155; border-radius: 10px; }
.modal { z-index: 3000 !important; }
.modal-backdrop { z-index: 2999 !important; }

/* --- é¢œè‰²é€‰æ‹©å™¨å½»åº•ä¿®å¤ --- */
.color-block-select {
    color: transparent !important;
    text-shadow: none !important;
    border: 1px solid var(--border-color) !important;
    cursor: pointer;
    transition: transform 0.2s;
}

/* å¼ºåˆ¶è®©é€‰ä¸­çš„èƒŒæ™¯è‰²æ˜¾ç°å‡ºæ¥ */
.color-block-select option {
    background-color: #1e293b !important;
    color: white !important;
    padding: 12px;
}

/* --- 3D æ“ä½œæŒ‡å¼•æµ®çª— --- */
.interaction-guide {
    position: absolute;
    bottom: 20px;
    right: 20px;
    background: rgba(15, 23, 42, 0.7);
    backdrop-filter: blur(8px);
    border: 1px solid rgba(56, 189, 248, 0.3);
    border-radius: 12px;
    padding: 12px 16px;
    color: #94a3b8;
    font-size: 12px;
    z-index: 100;
    pointer-events: none; /* ä¸æŒ¡é¼ æ ‡ */
}

.guide-item { display: flex; align-items: center; margin-bottom: 6px; }
.guide-item i { color: var(--accent-blue); margin-right: 8px; font-size: 16px; }
/* --- æç®€é«˜çº§æ„Ÿè¾“å…¥æ§ä»¶ --- */
.form-control, .form-select, .it-color {
    background-color: #1e293b !important;
    border: 1px solid #334155 !important;
    color: #f1f5f9 !important;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1) !important; /* ğŸ‘ˆ è®©è¿‡æ¸¡å˜çµåŠ¨ */
    outline: none !important;
    box-shadow: none !important;
}

/* --- æ‚¬åœæ—¶å¾®äº® --- */
.form-control:hover, .form-select:hover {
    border-color: #475569 !important;
}

/* --- é‡ç‚¹ï¼šé€‰ä¸­ï¼ˆèšç„¦ï¼‰æ—¶çš„çµåŠ¨å‘å…‰æ•ˆæœ --- */
.form-control:focus, .form-select:focus, .it-color:focus {
    border-color: var(--accent-blue) !important; /* å˜æˆç”µå…‰è“ */
    background-color: #1e293b !important;
    /* ğŸ‘ˆ å¢åŠ ä¸€å±‚æŸ”å’Œçš„å¤–å‘å…‰ */
    box-shadow: 0 0 0 4px rgba(56, 189, 248, 0.15) !important;
    transform: translateY(-1px); /* ğŸ‘ˆ é€‰ä¸­æ—¶å¾®å¾®ä¸Šæµ®ï¼Œæ›´æœ‰äº¤äº’æ„Ÿ */
}

/* --- é’ˆå¯¹æ•°å­—è¾“å…¥æ¡†å»æ‰ä¸‘é™‹çš„ç®­å¤´ --- */
input::-webkit-outer-spin-button,
input::-webkit-inner-spin-button {
    -webkit-appearance: none;
    margin: 0;
}
input[type=number] {
    -moz-appearance: textfield;
}
/* è®©ä¸‹æ‹‰æŒ‰é’®å’Œåˆ—è¡¨é¡¹ç»Ÿä¸€é«˜åº¦ä¸å¯¹é½ */
.color-dd-item{
  padding: 8px 12px !important;
  display: flex !important;
  align-items: center !important;
  height: 38px;                /* ä½ æƒ³æ›´é«˜å¯æ”¹ 40/44 */
}

/* è‰²å—ï¼šåšæˆ pill é•¿æ¡ */
.color-swatch{
  width: 100%;
  height: 18px;
  border-radius: 10px;
  border: 1px solid rgba(255,255,255,0.20);
  box-shadow: inset 0 0 0 1px rgba(0,0,0,0.12);
}

/* é¡¶éƒ¨â€œå½“å‰é€‰ä¸­â€çš„è‰²æ¡ç¨å¾®æ›´åšã€æ›´æœ‰è´¨æ„Ÿ */
.color-swatch--active{
  height: 20px;
  border-radius: 11px;
  border: 1px solid rgba(255,255,255,0.25);
}
.dropdown-menu{
  min-width: 100% !important;
}
/* ä¸‹æ‹‰èœå•æ•´ä½“æ›´è´´åˆä½ çš„æš—è‰² UI */
.dropdown-menu-dark{
  padding: 8px !important;
  border-radius: 14px !important;
  border: 1px solid rgba(148,163,184,0.18) !important;
  background: rgba(15, 23, 42, 0.92) !important;
  backdrop-filter: blur(10px);
}

/* hover æ›´æœ‰â€œé«˜çº§æ„Ÿâ€ */
.dropdown-item.color-dd-item:hover{
  background: rgba(148,163,184,0.10) !important;
}

/* å“åº”å¼è°ƒæ•´ */
@media (max-width: 768px) {
    .pc-guide { display: none; }
    .mobile-guide { display: block; }
}
@media (min-width: 769px) {
    .pc-guide { display: block; }
    .mobile-guide { display: none; }
}
@media (max-width: 768px) {
    #sidebar { position: fixed; left: 0; top: 60px; transform: translateX(-100%); width: 85% !important; min-width: unset; height: calc(100vh - 60px); }
    #sidebar.show { transform: translateX(0); box-shadow: 10px 0 30px rgba(0,0,0,0.5); }
}